---
title: "Ruka Classic Sprint Predictions"
author: "Joran Elias"
date: "2023-11-23"
categories: [world cup,sprint,predictions]
draft: true
---

```{r pkgs}
library(tidyverse)
library(statskier2)
library(gt)
library(gtExtras)
```

Don’t take this too seriously. This is mostly an intellectual exercise for me, based on an interesting method that was suggested to me several months ago. I’m not going to go into the details at the moment, I’m mainly recording the predictions here just to force myself to commit to following up on it afterwards. So I’ll try to update each prediction post with the actual results and a comparison. My expectations for it’s performance at the moment is fairly low.

The methodology is also still unfinished. I’m sure I’ll be fiddling with it a lot over the course of the season, but I’m trying to commit to publish these for as many World Cup events as I can. It’s sort of reliant on my having a reliable start list, so if I’m busy or traveling the day before a race, I may not get to it in time, we’ll see.

For the moment all I’m going to say is that I’m publishing predicted finishing order for the entire start list. The “Predicted PR” column is the actual value the model outputs, so it gives some relative sense of certainty. Values that are further apart represent more certainty of the gap in finishing place. But they are not probabilities and do not have any particular units.

Also, in case it wasn’t clear, I’m not terribly interested in participating in Twitter anymore, so anything I produce this season will be going here.

```{r pred-data}
mens_ruka_preds <- 
  readr::read_csv(file = '2023-11-24_men_cl_spr_ruka.csv',
                  show_col_types = FALSE)
womens_ruka_preds <- 
  readr::read_csv(file = '2023-11-24_women_cl_spr_ruka.csv',
                  show_col_types = FALSE)
```
```{r tbl-men}
mens_ruka_preds |> 
  select(-compid) |> 
  gt() |> 
  tab_header(title = "Ruka Classic Sprint",subtitle = "Men") |> 
  opt_align_table_header(align = 'left') |> 
  tab_caption(caption = "") |> 
  tab_options(
    table.font.size = 9,
    ihtml.active = TRUE,
    ihtml.use_pagination = TRUE,
    ihtml.use_compact_mode = TRUE,
    ihtml.use_highlight = TRUE
  ) |> 
  cols_label(
    fisid = 'FIS Code',
    name = 'Name',
    page_rank = 'Predicted PR',
    page_rank_pos = 'Predicted Finish') |> 
  fmt_number(columns = page_rank,decimals = 4) |> 
  gt_plt_bar(column = page_rank)
```

```{r tbl-wom}
womens_ruka_preds |> 
  select(-compid) |> 
  gt() |> 
  tab_header(title = "Ruka Classic Sprint",subtitle = "Women") |>
  opt_align_table_header(align = 'left') |> 
  tab_caption(caption = "") |> 
  tab_options(
    table.font.size = 9,
    ihtml.active = TRUE,
    ihtml.use_pagination = TRUE,
    ihtml.use_compact_mode = TRUE,
    ihtml.use_highlight = TRUE
  ) |> 
  cols_label(
    fisid = 'FIS Code',
    name = 'Name',
    page_rank = 'Predicted PR',
    page_rank_pos = 'Predicted Finish') |> 
  fmt_number(columns = page_rank,decimals = 4) |> 
  gt_plt_bar(column = page_rank)
```
